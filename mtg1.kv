<MTGCardWidget>:
    orientation: "vertical"
    size_hint: None, None
    size: "300dp", "420dp"
    radius: [15]
    elevation: 4
    padding: "8dp"
    md_bg_color: 0.1, 0.1, 0.1, 1  # Dark border look

    # --- Header: Name and Mana ---
    BoxLayout:
        size_hint_y: None
        height: "30dp"
        spacing: "5dp"
        
        MDLabel:
            text: root.card_name
            font_style: "H6"
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            bold: True
            halign: "left"
            valign: "center"
        
        MDLabel:
            text: root.mana_cost
            halign: "right"
            theme_text_color: "Custom"
            text_color: 0.8, 0.8, 1, 1
            size_hint_x: 0.4

    # --- Card Image ---
    AsyncImage:
        source: root.image_url
        size_hint_y: None
        height: "180dp"
        allow_stretch: True
        keep_ratio: True
        nocache: True

    # --- Type Line ---
    MDLabel:
        text: root.type_line
        size_hint_y: None
        height: "25dp"
        font_style: "Subtitle1"
        theme_text_color: "Custom"
        text_color: 1, 1, 1, 1
        bold: True

    # --- Oracle Text Box ---
    ScrollView:
        md_bg_color: 0.9, 0.9, 0.9, 1
        bar_width: 0
        
        MDLabel:
            text: root.oracle_text
            font_style: "Body2"
            theme_text_color: "Custom"
            text_color: 0.9, 0.9, 0.9, 1
            size_hint_y: None
            height: self.texture_size[1]
            padding: "4dp", "4dp"

MDScreen:
    BoxLayout:
        orientation: "vertical"
        
        MDTopAppBar:
            title: "MTG Card Viewer"
            elevation: 4
            right_action_items: [["refresh", lambda x: app.refresh_cards()]]

        BoxLayout:
            orientation: "vertical"
            padding: "10dp"
            spacing: "10dp"

            MDLabel:
                id: status_label
                text: "Press refresh to load cards..."
                halign: "center"
                size_hint_y: None
                height: "40dp"

            # Scroll view for the list of cards
            ScrollView:
                GridLayout:
                    id: card_grid
                    cols: 1
                    spacing: "20dp"
                    padding: "10dp"
                    size_hint_y: None
                    height: self.minimum_height
                    row_default_height: "440dp"
                    row_force_default: True